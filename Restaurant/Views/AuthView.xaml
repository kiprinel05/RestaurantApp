<Page x:Class="Restaurant.Views.AuthView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:vm="clr-namespace:Restaurant.ViewModels"
      mc:Ignorable="d"
      Title="Authentication" Height="700" Width="500">

    <Page.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="0,5,0,15"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#007ACC"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
        </Style>
        <Style TargetType="PasswordBox">
            <Setter Property="Margin" Value="0,5,0,15"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#007ACC"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
        </Style>
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Background" Value="#007ACC"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="0,10"/>
            <Setter Property="MinWidth" Value="200"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1C97EA"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#007ACC"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1C97EA"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="0,5"/>
        </Style>
    </Page.Resources>

    <Grid Background="#1E1E1E">
        <ScrollViewer>
            <Border Background="#252526" 
                    CornerRadius="10" 
                    Margin="20"
                    Padding="30">
                <Grid>
                    <!-- Login Form -->
                    <Grid x:Name="LoginForm">
                        <Grid.Style>
                            <Style TargetType="Grid">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsLoginVisible}" Value="False">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                        
                        <StackPanel>
                            <TextBlock Text="Welcome Back"
                                     FontSize="24"
                                     FontWeight="Bold"
                                     HorizontalAlignment="Center"
                                     Margin="0,0,0,30"/>

                            <TextBlock Text="Email"/>
                            <TextBox Text="{Binding LoginEmail, UpdateSourceTrigger=PropertyChanged}"/>

                            <TextBlock Text="Password"/>
                            <PasswordBox x:Name="LoginPasswordBox"
                                       Margin="0,5,0,15"/>

                            <TextBlock Text="{Binding LoginErrorMessage}"
                                     Foreground="#FF3333"
                                     TextWrapping="Wrap"
                                     Margin="0,10"/>

                            <StackPanel HorizontalAlignment="Center" Margin="0,20,0,0">
                                <Button Content="Login"
                                        Command="{Binding LoginCommand}"
                                        Style="{StaticResource PrimaryButton}"/>

                                <Button Content="Create Account"
                                        Command="{Binding ShowRegisterCommand}"
                                        Style="{StaticResource SecondaryButton}"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <!-- Register Form -->
                    <Grid x:Name="RegisterForm">
                        <Grid.Style>
                            <Style TargetType="Grid">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsLoginVisible}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                        
                        <StackPanel>
                            <TextBlock Text="Create Account"
                                     FontSize="24"
                                     FontWeight="Bold"
                                     HorizontalAlignment="Center"
                                     Margin="0,0,0,30"/>

                            <TextBlock Text="First Name"/>
                            <TextBox Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"/>

                            <TextBlock Text="Last Name"/>
                            <TextBox Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"/>

                            <TextBlock Text="Email"/>
                            <TextBox Text="{Binding RegisterEmail, UpdateSourceTrigger=PropertyChanged}"/>

                            <TextBlock Text="Password"/>
                            <PasswordBox x:Name="RegisterPasswordBox"
                                       Margin="0,5,0,15"/>

                            <TextBlock Text="Confirm Password"/>
                            <PasswordBox x:Name="ConfirmPasswordBox"
                                       Margin="0,5,0,15"/>

                            <TextBlock Text="Phone Number"/>
                            <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}"/>

                            <TextBlock Text="Delivery Address"/>
                            <TextBox Text="{Binding DeliveryAddress, UpdateSourceTrigger=PropertyChanged}"
                                    Height="60"
                                    TextWrapping="Wrap"
                                    AcceptsReturn="True"/>

                            <TextBlock Text="{Binding RegisterErrorMessage}"
                                     Foreground="#FF3333"
                                     TextWrapping="Wrap"
                                     Margin="0,10"/>

                            <StackPanel HorizontalAlignment="Center" Margin="0,20,0,0">
                                <Button Content="Register"
                                        Command="{Binding RegisterCommand}"
                                        Style="{StaticResource PrimaryButton}"/>

                                <Button Content="Back to Login"
                                        Command="{Binding ShowLoginCommand}"
                                        Style="{StaticResource SecondaryButton}"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </ScrollViewer>
    </Grid>
</Page> 